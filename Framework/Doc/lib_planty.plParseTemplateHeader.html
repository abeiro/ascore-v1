
		<html>
		<head>
		<title>Documentacion CoreG2 Funcion plParseTemplateHeader</title>
		</head>
		<style>
		body 		{font-family:verdana,sans,serif; font-size:10px;}
		.mini		{font-size:8px;}
		.box		{border:1px solid gray;background:#EEEEFF;}
		.desc		{font-size:12px;border:1px solid gray; padding:5px;}   
		</style>
		<body>
		<h1>CoreG2 version 0.99.9</h1>
		<h2>plParseTemplateHeader</h2>
		<span class="mini">Fichero /home/operador/public_html/globalscheduler/Framework/../Framework/Lib/lib_planty.php</span>
		<br><br><h2><b>plantilla</b>::<b>plParseTemplateHeader</b></h2>Mï¿½todo: pertenece a la clase <b>plantilla</b><br>Clase <b>plantilla</b> </i>: derivada de <b></b><br><br><br><div class="desc">  }
<br>
</div>
<br><div class="box"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">plParseTemplateHeader</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">=</span><span style="color: #DD0000">""</span><span style="color: #007700">)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$styles</span><span style="color: #007700">,</span><span style="color: #0000BB">$nn</span><span style="color: #007700">,</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">,</span><span style="color: #0000BB">$PET</span><span style="color: #007700">;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(empty(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dat</span><span style="color: #007700">=array();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$copy</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">data</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$nn</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$cut</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_array_search_fuzz</span><span style="color: #007700">(</span><span style="color: #0000BB">$copy</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">mark</span><span style="color: #007700">[</span><span style="color: #DD0000">"set"</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">debug</span><span style="color: #007700">(</span><span style="color: #DD0000">"SET&nbsp;Encontrado&nbsp;en&nbsp;</span><span style="color: #0000BB">$cut</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$head</span><span style="color: #007700">=(</span><span style="color: #0000BB">$cut</span><span style="color: #007700">!==</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">array_splice</span><span style="color: #007700">(</span><span style="color: #0000BB">$copy</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$cut</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">$copy</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$head</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$styles</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">"/dynamic_class_</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">/"</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">,</span><span style="color: #0000BB">$null</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Navvars&nbsp;patch&nbsp;*/<br />&nbsp;&nbsp;/****************&nbsp;mod_rewrite&nbsp;patch&nbsp;&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"NAV_SEPARATOR"</span><span style="color: #007700">]==</span><span style="color: #DD0000">"/"</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$chunk</span><span style="color: #007700">=(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$PET</span><span style="color: #007700">,</span><span style="color: #DD0000">"navvars=on"</span><span style="color: #007700">)!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)?(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$PET</span><span style="color: #007700">,</span><span style="color: #DD0000">"navvars=on"</span><span style="color: #007700">)):</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$PET</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$navvars</span><span style="color: #007700">=</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"ROOT"</span><span style="color: #007700">].</span><span style="color: #DD0000">"/"</span><span style="color: #007700">.(</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$PET</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$chunk</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">debug</span><span style="color: #007700">(</span><span style="color: #DD0000">"Navvars&nbsp;init&nbsp;</span><span style="color: #0000BB">$navvars</span><span style="color: #DD0000">&nbsp;POS="</span><span style="color: #007700">.</span><span style="color: #0000BB">$chunk</span><span style="color: #007700">.</span><span style="color: #DD0000">"(</span><span style="color: #0000BB">$PET</span><span style="color: #DD0000">)"</span><span style="color: #007700">,</span><span style="color: #DD0000">"green"</span><span style="color: #007700">);<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;</span><span style="color: #FF8000">/****************&nbsp;mod_rewrite&nbsp;patch&nbsp;&nbsp;*/<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$navvars</span><span style="color: #007700">.=</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"NAV_SEPARATOR_I"</span><span style="color: #007700">]}</span><span style="color: #DD0000">navvars=on"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"NAVVARS"</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$navvars</span><span style="color: #007700">.=</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"NAV_SEPARATOR"</span><span style="color: #007700">]}</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">="</span><span style="color: #007700">.</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #0000BB">$v</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$nextpage</span><span style="color: #007700">=</span><span style="color: #0000BB">$navvars</span><span style="color: #007700">.</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"NAV_SEPARATOR"</span><span style="color: #007700">]}</span><span style="color: #DD0000">offset="</span><span style="color: #007700">.</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"nextP"</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$prevpage</span><span style="color: #007700">=</span><span style="color: #0000BB">$navvars</span><span style="color: #007700">.</span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"NAV_SEPARATOR"</span><span style="color: #007700">]}</span><span style="color: #DD0000">offset="</span><span style="color: #007700">.</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"prevP"</span><span style="color: #007700">];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$j</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$dat_size</span><span style="color: #007700">=</span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]);</span><span style="color: #0000BB">$j</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$dat_size</span><span style="color: #007700">;</span><span style="color: #0000BB">$j</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//debug(key($SYS["GLOBAL"])."-".current($SYS["GLOBAL"])."-&nbsp;$i");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">])==</span><span style="color: #0000BB">FALSE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;I:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]).</span><span style="color: #DD0000">'&nbsp;--&gt;.*&lt;!--&nbsp;I:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;I:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Patch&nbsp;20070501&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">])&lt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;NI:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]).</span><span style="color: #DD0000">'&nbsp;--&gt;.*&lt;!--&nbsp;NI:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;NI:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Patch&nbsp;20070501&nbsp;*/<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">next</span><span style="color: #007700">(</span><span style="color: #0000BB">$SYS</span><span style="color: #007700">[</span><span style="color: #DD0000">"GLOBAL"</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Smart&nbsp;pag&nbsp;links&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;//echo&nbsp;"&lt;pre&gt;";print_r($dat);echo&nbsp;"&lt;/pre&gt;";<br />&nbsp;&nbsp;&nbsp;&nbsp;//echo&nbsp;"{$dat["nextP"]}&gt;={$dat["totalPages"]}:{$dat["offset"]}";<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"nextP"</span><span style="color: #007700">]&lt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;IFPAGER1&nbsp;--&gt;.*&lt;!--&nbsp;FIPAGER1&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;IFPAGER2&nbsp;--&gt;.*&lt;!--&nbsp;FIPAGER2&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;((</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"nextP"</span><span style="color: #007700">]&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&amp;&amp;(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"offset"</span><span style="color: #007700">]&lt;</span><span style="color: #0000BB">1</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;IFPAGER1&nbsp;--&gt;.*&lt;!--&nbsp;FIPAGER1&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"nextP"</span><span style="color: #007700">]==</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"totalPages"</span><span style="color: #007700">])&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;IFPAGER2&nbsp;--&gt;.*&lt;!--&nbsp;FIPAGER2&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;((</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"nextP"</span><span style="color: #007700">]==</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"offset"</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;IFPAGER2&nbsp;--&gt;.*&lt;!--&nbsp;FIPAGER2&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;if&nbsp;((</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"nextP"</span><span style="color: #007700">]==</span><span style="color: #0000BB">$dat</span><span style="color: #007700">[</span><span style="color: #DD0000">"totalPages"</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;IFPAGER2&nbsp;--&gt;.*&lt;!--&nbsp;FIPAGER2&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Smart&nbsp;pag&nbsp;links&nbsp;*/<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">sizeof</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">);</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)==</span><span style="color: #0000BB">False</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;I:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;.*&lt;!--&nbsp;I:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;I:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Patch&nbsp;20070501&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)&lt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">ereg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;NI:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;.*&lt;!--&nbsp;NI:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;NI:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;Patch&nbsp;20070501&nbsp;*/<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;D:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_numeric</span><span style="color: #007700">(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)))&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;S:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">number_format</span><span style="color: #007700">(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">','</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'.'</span><span style="color: #007700">).</span><span style="color: #DD0000">"&amp;euro;"</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;S:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;F:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.5f"</span><span style="color: #007700">,</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;E:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">number_format</span><span style="color: #007700">(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">','</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'.'</span><span style="color: #007700">),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;V:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%.0f"</span><span style="color: #007700">,</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;A:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"%d/%m/%Y&nbsp;"</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;H:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"%d/%m/%Y&nbsp;%H:%M"</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;R:'</span><span style="color: #007700">.</span><span style="color: #0000BB">key</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">).</span><span style="color: #DD0000">'&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">int_to_text_ex</span><span style="color: #007700">(</span><span style="color: #0000BB">current</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">)),</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;N:nextpage&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">$nextpage</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;N:prevpage&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">$prevpage</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;!--&nbsp;N:navvars&nbsp;--&gt;'</span><span style="color: #007700">,</span><span style="color: #0000BB">$navvars</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">next</span><span style="color: #007700">(</span><span style="color: #0000BB">$dat</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"/&lt;!--&nbsp;K:(.*)\(\"(.*)\"\)&nbsp;--&gt;/e"</span><span style="color: #007700">,</span><span style="color: #DD0000">"\\1('\\2')"</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"/&lt;!--&nbsp;K:(.*)\('(.*)'\)&nbsp;--&gt;/e"</span><span style="color: #007700">,</span><span style="color: #DD0000">"\\1('\\2')"</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"/&lt;!--&nbsp;K:(.*)\((.*)\)&nbsp;--&gt;/e"</span><span style="color: #007700">,</span><span style="color: #DD0000">"\\1(\\2)"</span><span style="color: #007700">,</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">.</span><span style="color: #DD0000">"&lt;!--&nbsp;END&nbsp;OF&nbsp;PARSEHEADER&nbsp;--&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br /><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
		<br><br>
		<div align="center"><a href="lib_planty-index.html">up</a></div>
		<br><br>
		</body>
		